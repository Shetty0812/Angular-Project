<div class="dashboard-container">
  <!-- Top Bar -->
  <div class="dashboard-header">
    <h2 class="greeting">ğŸ‘‹ Hello, {{ loggedInUser?.name }}</h2>
    <div class="dashboard-actions">
      <button class="apply-btn" (click)="navigateToApplyLoan()">+ New Loan</button>
      <!-- Logout button removed -->
    </div>
  </div>

  <!-- Section: Loan Applications -->
  <div class="loans-section">
    <h3>ğŸ“‘ Previous Loan Applications</h3>

    <div *ngIf="loadingLoans" class="loading-msg">ğŸ”„ Loading your loan applications...</div>
    <div *ngIf="!loadingLoans && userLoans.length === 0" class="no-loans-msg">
      â— You have not submitted any loan applications yet.
    </div>

    <table *ngIf="userLoans.length > 0" class="loan-table">
      <thead>
        <tr>
          <th>Loan ID</th>
          <th>Applicant Name</th>
          <th>Type</th>
          <th>Amount</th>
          <th>Tenure</th>
          <th>Document</th>
          <th>Status</th>
          <th>Submission Date</th>
          <th>Action</th> 
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let loan of userLoans">
          <td>{{ loan.loan_id || loan.id }}</td>
          <td>{{ loan.applicantName }}</td>
          <td>{{ loan.type }}</td>
          <td>{{ loan.amount | currency }}</td>
          <td>{{ loan.tenure }}</td>
          <td>{{ loan.document || '-' }}</td>
          <td>
            <span [ngStyle]="{'color': getStatusColor(loan.status)}">
              {{ loan.status }}
            </span>
          </td>
          <td>{{ loan.submissionDate | date:'short' }}</td>
          <td>
            <button *ngIf="loan.status === 'pending'" (click)="cancelLoan(loan)">
              Cancel
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
